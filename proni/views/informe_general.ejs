<!DOCTYPE html>
<html>

<head>
    <title>Dos Columnas con Pie de Página Pegajoso</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            display: flex;
            flex: 1;
        }

        .columna {
            flex: 1;
            padding: 20px;
            border: 1px solid #ccc;
        }

        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 2px;
        }

        html,
        body {
            height: 100%;
        }

        .cTop {
            column-count: 5;
            column-gap: 20px;
            max-width: 800px; /* Ajusta el ancho máximo según tus necesidades */
            margin: 0 auto; /* Centra el contenedor */
        }

        .coltop {
            break-inside: avoid; /* Evita que se divida dentro de la columna */
            margin-bottom: 20px; /* Espaciado entre las columnas */
        }
        .enlace-descarga {
            color: rgb(69, 69, 77);
            /* Otros estilos que desees aplicar */
        }
        .enlace-descarga:hover {
            color: rgb(43, 63, 151);
            text-decoration: underline;
        /* Estilos adicionales cuando el cursor está sobre el enlace */
        }
    </style>
</head>

<body>
    <nav class="navbar sticky-top navbar-dark bg-dark sticky-top">
        <a class="navbar-brand" href="/vsts/vaneSoftecSolutions" style="max-width: 100%; word-wrap: break-word; white-space: normal;"><%= titulo %></a>
        <div>
            <button class="btn btn-secondary" type="button"
               aria-haspopup="true" data-display="static" onclick="general('detalles')">
                <img src="/icon/general.svg" alt="Buscar" width="25px"> General
            </button>
            <button class="btn btn-secondary" type="button"
                aria-haspopup="true" data-display="static" onclick="general('zona')">
                    <img src="/icon/zona.svg" alt="Zona" width="25px"> Zona
            </button> 
            <button class="btn btn-secondary" type="button"
                aria-haspopup="true" data-display="static" onclick="general('municipio')">
                    <img src="/icon/municipio.svg" alt="Municipio" width="25px"> Municipio
            </button>
        </div>
    </nav>

    <div class="container">
        <div class="columna">
            <!-- Contenido de la primera columna -->
            <h2>Tablas</h2>
            <p>Las tablas presentan los datos que sirvieron como base para la creación de las gráficas. 
                Estas tablas actúan como la fuente primaria de información cuantitativa, proporcionando detalles específicos sobre cada variable medida. Cada celda en las tablas representa un punto de datos específico. 
                Mientras que las gráficas ofrecen una visualización más intuitiva, las tablas respaldan y detallan los valores cuantitativos que respaldan las representaciones visuales.</p>
                <div class="contenido" style="text-align: -webkit-center;">
                    <% tablas.forEach(function(tlb, indexTlb){ %>
                      <section>
                        <h6 style="text-align: left;">Tabla <%= indexTlb + 1%> : <a class="enlace-descarga" onclick="descargarCSV('<%= linkTablas[indexTlb] %>', <%= indexTlb %>)">Ver CSV</a></h6> 
                        <div style="overflow-x: auto; max-width: 400px;"> <!-- Establece un ancho máximo para la tabla y permite el desplazamiento horizontal -->
                          <table border="1" style="width: 100%;"> <!-- Hace que la tabla ocupe el 100% del ancho del contenedor -->
                            <thead>
                              <tr>
                                <% cabezeras[indexTlb].forEach(function(cbz) { %>
                                  <th style="width: auto;"> <!-- Puedes ajustar el ancho de las columnas según sea necesario -->
                                    <%= cbz %>
                                  </th>
                                <% }); %>
                              </tr>
                            </thead>
                            <tbody>
                              <% tlb.forEach(function(dato) { %>
                                <tr>
                                  <% cabezeras[indexTlb].forEach(function(cbz) { %>
                                    <td>
                                      <%= dato[cbz] || '0' %>
                                    </td>
                                  <% }); %>
                                </tr>
                              <% }); %>
                            </tbody>
                          </table>
                        </div>
                      </section>
                      <br>
                    <% }); %>
                  </div>                  
        </div>

        <div class="columna">
            <!-- Contenido de la segunda columna -->
            <h2>Imagenes</h2>
            <p> Las imágenes de las gráficas capturan visualmente los resultados obtenidos a través del formulario de recopilación de datos. 
                Estas representaciones gráficas no solo ofrecen una presentación de los resultados, sino que también proporcionan una visión detallada del análisis cuantitativo empleado en el estudio.</p>
            <div class="contenido" style="text-align: -webkit-center;">
                <% imagenes.forEach(function(img, index){ %>
                    <section>
                        <table border="0">
                            <thead>
                                <tr>
                                    <th style="text-align: left;">Imagen <%= index + 1%> : <a class="enlace-descarga" href="<%- img %>" target="_blank">Abrir Imagen</a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><img src="<%- img %>" width="500"></td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    <br>
                    <% }); %>
            </div>
        </div>
    </div>

    <footer>
        <!-- Pie de página -->
        <p>Vanessa Melenciano Llamas, Isaul Ibarra Belmonte, Ezra federico Parra Gonzalez © 2023 VSTS</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script>
        function descargarCSV(url, index) {
            alert("Para descargar el archivo, En la nueva ventana, click derecho en los datos y luego: 'Guardar como'")
            // URL del archivo CSV
            var urlArchivoCSV = url;
        
            // Crear un enlace temporal
            var enlaceTemporal = document.createElement('a');
            enlaceTemporal.href = urlArchivoCSV;
            enlaceTemporal.target="_blank";
        
            // Simular clic en el enlace para iniciar la descarga
            document.body.appendChild(enlaceTemporal);
            enlaceTemporal.click();
            document.body.removeChild(enlaceTemporal);
        }
        </script>
        <script>
            function general(area) {
                let url = '/vsts/proni/general/'+area
                // Crear un enlace temporal
                let enlaceTemporal = document.createElement('a');
                enlaceTemporal.href = url;
    
                // Simular clic en el enlace para iniciar la descarga
                document.body.appendChild(enlaceTemporal);
                enlaceTemporal.click();
                document.body.removeChild(enlaceTemporal);
            }
        </script>
</body>

</html>