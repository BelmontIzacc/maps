<!DOCTYPE html>
<html>

<head>
    <title>Detalles generales</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            display: flex;
            flex: 1;
        }

        .columna {
            flex: 1;
            padding: 20px;
            border: 1px solid #ccc;
        }

        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 2px;
        }

        html,
        body {
            height: 100%;
        }

        .cTop {
            column-count: 5;
            column-gap: 20px;
            max-width: 800px; /* Ajusta el ancho máximo según tus necesidades */
            margin: 0 auto; /* Centra el contenedor */
        }

        .coltop {
            break-inside: avoid; /* Evita que se divida dentro de la columna */
            margin-bottom: 20px; /* Espaciado entre las columnas */
        }
        .enlace-descarga {
            color: rgb(69, 69, 77);
            /* Otros estilos que desees aplicar */
        }
        .enlace-descarga:hover {
            color: rgb(43, 63, 151);
            text-decoration: underline;
        /* Estilos adicionales cuando el cursor está sobre el enlace */
        }
    </style>
</head>

<body>
    <nav class="navbar sticky-top navbar-dark bg-dark sticky-top">
        <a class="navbar-brand" href="/vsts/vaneSoftecSolutions" style="max-width: 100%; word-wrap: break-word; white-space: normal;"><%= titulo %></a>
        <a href="/vsts/vaneSoftecSolutions" class="btn btn-secondary" type="button"
               aria-haspopup="true" data-display="static">
                <img src="/icon/left.svg" alt="Icono">
        </a>
        <button type="button" class="btn btn-secondary"  aria-haspopup="true" data-display="static" 
            data-toggle="modal" data-target="#exampleModalScrollable">
            <img src="/icon/info.svg" alt="Icono">
        </button>
        <div>
            <button class="btn btn-secondary" type="button"
               aria-haspopup="true" data-display="static" onclick="general('detalles')">
                <img src="/icon/general.svg" alt="Buscar" width="25px"> Edad
            </button>
            <button class="btn btn-secondary" type="button"
                aria-haspopup="true" data-display="static" onclick="general('top')">
                <img src="/icon/grafica.svg" alt="Buscar" width="25px"> Top
            </button>
            <button class="btn btn-secondary" type="button"
                aria-haspopup="true" data-display="static" onclick="general('general')">
                <img src="/icon/book.svg" alt="Buscar" width="25px"> General
            </button>
            <button class="btn btn-secondary" type="button"
                aria-haspopup="true" data-display="static" onclick="general('zona')">
                    <img src="/icon/zona.svg" alt="Zona" width="25px"> Zona
            </button> 
            <button class="btn btn-secondary" type="button"
                aria-haspopup="true" data-display="static" onclick="general('municipio')">
                    <img src="/icon/municipio.svg" alt="Municipio" width="25px"> Municipio
            </button>
        </div>
    </nav>

    <div class="container">
        <div class="columna">
            <!-- Contenido de la primera columna -->
            <h2>Tablas</h2>
            <p>Las tablas presentan los datos que sirvieron como base para la creación de las gráficas. 
                Estas tablas actúan como la fuente primaria de información cuantitativa, proporcionando detalles específicos sobre cada variable medida. Cada celda en las tablas representa un punto de datos específico. 
                Mientras que las gráficas ofrecen una visualización más intuitiva, las tablas respaldan y detallan los valores cuantitativos que respaldan las representaciones visuales.</p>
                <div class="contenido" style="text-align: -webkit-center;">
                    <% tablas.forEach(function(tlb, indexTlb){ %>
                      <section>
                        <h6 style="text-align: left;">Tabla <%= indexTlb + 1%> : <a class="enlace-descarga" onclick="descargarCSV('<%= linkTablas[indexTlb] %>', <%= indexTlb %>)">Ver CSV</a></h6> 
                        <div style="overflow-x: auto; max-width: 400px;"> <!-- Establece un ancho máximo para la tabla y permite el desplazamiento horizontal -->
                          <table border="1" style="width: 100%;"> <!-- Hace que la tabla ocupe el 100% del ancho del contenedor -->
                            <thead>
                              <tr>
                                <% cabezeras[indexTlb].forEach(function(cbz) { %>
                                  <th style="width: auto;"> <!-- Puedes ajustar el ancho de las columnas según sea necesario -->
                                    <%= cbz %>
                                  </th>
                                <% }); %>
                              </tr>
                            </thead>
                            <tbody>
                              <% tlb.forEach(function(dato) { %>
                                <tr>
                                  <% cabezeras[indexTlb].forEach(function(cbz) { %>
                                    <td>
                                      <%= dato[cbz] || '0' %>
                                    </td>
                                  <% }); %>
                                </tr>
                              <% }); %>
                            </tbody>
                          </table>
                        </div>
                      </section>
                      <br>
                    <% }); %>
                  </div>                  
        </div>

        <div class="columna">
            <!-- Contenido de la segunda columna -->
            <h2>Imagenes</h2>
            <p> Las imágenes de las gráficas capturan visualmente los resultados obtenidos a través del formulario de recopilación de datos. 
                Estas representaciones gráficas no solo ofrecen una presentación de los resultados, sino que también proporcionan una visión detallada del análisis cuantitativo empleado en el estudio.</p>
            <div class="contenido" style="text-align: -webkit-center;">
                <% imagenes.forEach(function(img, index){ %>
                    <section>
                        <table border="0">
                            <thead>
                                <tr>
                                    <th style="text-align: left;">Imagen <%= index + 1%> : <a class="enlace-descarga" href="<%- img %>" target="_blank">Abrir Imagen</a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><img src="<%- img %>" width="500"></td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    <br>
                    <% }); %>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
          <div class="modal-content" style="text-align: justify;">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalScrollableTitle">Información</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">

                <p>
                    Se describen varias columnas que ofrecen información sobre la evaluación académica. 
                    Desde el rendimiento promedio en diferentes secciones hasta las calificaciones asignadas por revisores y detalles demográficos, 
                    cada columna proporciona datos para comprender el panorama educativo.
                </p>

                <% if (titulo == 'Detalles generales de los registros' || titulo == 'Detalles generales') { %>
                    <ul>
                        <li><strong>Sección:</strong> La categoría o división específica bajo la cual se evalúan las habilidades lingüísticas de los estudiantes, como Listening, Reading/Writing, o Speaking.</li>
                        
                        <li><strong>Aciertos promedio:</strong> La cantidad promedio de respuestas correctas obtenidas en una sección particular, indicando el rendimiento general en esa área.</li>
                        
                        <li><strong>Calificación:</strong> La evaluación asignada a una sección específica, expresada en términos de letras (A-, A, A+) para reflejar el nivel de competencia alcanzado.</li>
                        
                        <li><strong>Número de estudiantes con esa calificación por sección:</strong> La cantidad de estudiantes que obtuvieron una calificación específica en una sección determinada, proporcionando una visión de las calificaciones.</li>
                        
                        <li><strong>Promedio de aciertos asignada por revisores:</strong> La media de respuestas correctas dadas por los revisores para evaluar el desempeño general de los estudiantes.</li>
                        
                        <li><strong>Calificación promedio:</strong> La evaluación promedio otorgada a los estudiantes, considerando todas las secciones evaluadas.</li>
                        
                        <li><strong>Cantidad:</strong> La cantidad total de elementos, ya sea estudiantes, respuestas correctas, etc., dependiendo del contexto de la columna.</li>
                        
                        <li><strong>Género:</strong> La clasificación de los estudiantes en categorías como niño o niña, proporcionando información sobre la distribución de género en el grupo evaluado.</li>
                        
                        <li><strong>Edad:</strong> La edad de los estudiantes evaluados en la muestra, brindando información sobre la demografía del grupo.</li>
                        
                        <li><strong>Correct Answers Listening:</strong> La cantidad promedio de respuestas correctas asignadas a la sección de Listening.</li>
                        
                        <li><strong>Correct Answers Reading/Writing:</strong> El promedio de respuestas correctas asignadas a la sección de Reading/Writing, indicando el nivel de competencia en habilidades de lectura y escritura.</li>
                        
                        <li><strong>Correct Answers Speaking Part 1 y Part 2:</strong> La cantidad promedio de respuestas correctas asignadas a cada una de las secciones de Speaking Part 1 y Part 2, respectivamente.</li>
                        
                        <li><strong>Correct Answers Speaking:</strong> La cantidad promedio de respuestas correctas asignadas a la sección de Speaking en su conjunto, combinando las partes 1 y 2.</li>
                        
                        <li><strong>Reviewer Answers Listening, Reading/Writing, Speaking Part 1 y Part 2:</strong> La cantidad promedio de respuestas proporcionadas por los revisores en cada una de las secciones mencionadas, reflejando la evaluación de los revisores en las habilidades específicas de los estudiantes.</li>
                        
                        <li><strong>Qualification Speaking Part 1, Part 2 y Speaking:</strong> La calificación promedio otorgada a las secciones de Speaking Part 1, Part 2 y la sección de Speaking.</li>
                        
                        <li><strong>Qualification Listening, Reading/Writing:</strong> La calificación promedio asignada a las secciones de Listening y Reading/Writing, respectivamente.</li>
                        
                        <li><strong>Percentage Correct Listening, Reading/Writing, Speaking Part 1 y Part 2:</strong> El porcentaje promedio de respuestas correctas en cada una de las secciones mencionadas, proporcionando una perspectiva de la precisión en cada área.</li>
                        
                        <li><strong>Percentage Correct Speaking:</strong> El porcentaje promedio de respuestas correctas en la sección de Speaking, combinando las partes 1 y 2.</li>
                        
                        <li><strong>Percentage Correct:</strong> El porcentaje promedio de respuestas correctas en general, considerando todas las secciones evaluadas.</li>
                        
                        <li><strong>Top:</strong> Una etiqueta que podría indicar una clasificación superior o un nivel destacado en el desempeño, dependiendo del contexto de la columna.</li>
                    
                        <li><strong>CCT:</strong> Clave de la escuela.</li>
                        
                        <li><strong>Group:</strong> La categoría o grupo al que pertenece la pregunta en el informe.</li>
  
                        <li><strong>Question:</strong> La pregunta específica evaluada en el informe.</li>
                        
                        <li><strong>Number of Correct Answers:</strong> El número total de respuestas correctas para la pregunta.</li>
                        
                        <li><strong>Percentage of Correct Answers:</strong> El porcentaje de respuestas correctas en relación con el total de respuestas para la pregunta.</li>
                        
                        <li><strong>Percentage of Reviewers' Error:</strong> El porcentaje de error en las respuestas asignado por los revisores.</li>
                        
                        <li><strong>Frequency:</strong> La frecuencia con la que se ha encontrado la pregunta en el informe.</li>
                        
                        <li><strong>Average Percentage of Errors:</strong> El porcentaje promedio de errores para la pregunta, considerando múltiples instancias.</li>
                      
                        <li><strong>Escuela:</strong> Nombre de la escuela</li>
                    </ul>
                <% } %>

                <% if (titulo != 'Detalles generales de los registros' &&  titulo != 'Detalles generales') { %>
                    <ul>
                        <li><strong>Municipio:</strong> El nombre del área geográfica evaluada en el informe.</li>
                        
                        <li><strong>Zona:</strong> La ubicación geográfica o división específica a la que pertenece el municipio.</li>
                        
                        <li><strong>Promedio de aciertos en el examen para la sección Listening:</strong> La media de respuestas correctas en la sección de Listening, reflejando el desempeño general de los estudiantes en esta área.</li>
                        
                        <li><strong>Calificación promedio en los exámenes para la sección Listening:</strong> La calificación promedio asignada a los estudiantes en la sección de Listening.</li>
                        
                        <li><strong>Promedio de aciertos en la sección de Listening asignada por revisores:</strong> La media de respuestas correctas otorgadas por revisores en la sección de Listening, proporcionando una evaluación del desempeño.</li>
                        
                        <li><strong>Calificación promedio en los exámenes para la sección Reading/Writing:</strong> La calificación promedio asignada a los estudiantes en la sección de Reading/Writing, indicando el nivel general de competencia en estas habilidades.</li>
                        
                        <li><strong>Promedio de aciertos en la sección de Reading/Writing asignada por revisores:</strong> La media de respuestas correctas otorgadas por revisores en la sección de Reading/Writing, brindando una evaluación adicional de desempeño en estas habilidades.</li>
                        
                        <li><strong>Promedio de aciertos en los exámenes para la sección Speaking parte 1:</strong> La media de respuestas correctas en la sección de Speaking parte 1, reflejando el desempeño general en esta área específica.</li>
                        
                        <li><strong>Calificación promedio en los exámenes para la sección Speaking parte 1:</strong> La calificación promedio asignada a los estudiantes en la sección de Speaking parte 1.</li>
                        
                        <li><strong>Promedio de aciertos en la sección de Speaking parte 1 asignada por revisores:</strong> La media de respuestas correctas otorgadas por revisores en la sección de Speaking parte 1.</li>
                        
                        <li><strong>Promedio de aciertos en los exámenes para la sección Speaking parte 2:</strong> La media de respuestas correctas en la sección de Speaking parte 2, reflejando el desempeño general en esta área específica.</li>
                        
                        <li><strong>Calificación promedio en los exámenes para la sección Speaking parte 2:</strong> La calificación promedio asignada a los estudiantes en la sección de Speaking parte 2.</li>
                        
                        <li><strong>Promedio de aciertos en la sección de Speaking parte 2 asignada por revisores:</strong> La media de respuestas correctas otorgadas por revisores en la sección de Speaking parte 2.</li>
                        
                        <li><strong>Promedio de aciertos en los exámenes para la sección Speaking:</strong> La media de respuestas correctas en la sección de Speaking, combinando las partes 1 y 2.</li>
                        
                        <li><strong>Calificación promedio en los exámenes para la sección Speaking:</strong> La calificación promedio asignada a los estudiantes en la sección de Speaking, combinando las partes 1 y 2.</li>
                    </ul>
                <% } %>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
          </div>
        </div>
    </div>

    <footer>
        <!-- Pie de página -->
        <p>Vanessa Melenciano Llamas, Isaul Ibarra Belmonte, Ezra federico Parra Gonzalez © 2023 VSTS</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script>
        function descargarCSV(url, index) {
            alert("Para descargar el archivo, En la nueva ventana, click derecho en los datos y luego: 'Guardar como'")
            // URL del archivo CSV
            var urlArchivoCSV = url;
        
            // Crear un enlace temporal
            var enlaceTemporal = document.createElement('a');
            enlaceTemporal.href = urlArchivoCSV;
            enlaceTemporal.target="_blank";
        
            // Simular clic en el enlace para iniciar la descarga
            document.body.appendChild(enlaceTemporal);
            enlaceTemporal.click();
            document.body.removeChild(enlaceTemporal);
        }
        </script>
        <script>
            function general(area) {
                let url = '/vsts/proni/general/'+area
                // Crear un enlace temporal
                let enlaceTemporal = document.createElement('a');
                enlaceTemporal.href = url;
    
                // Simular clic en el enlace para iniciar la descarga
                document.body.appendChild(enlaceTemporal);
                enlaceTemporal.click();
                document.body.removeChild(enlaceTemporal);
            }
        </script>
</body>

</html>