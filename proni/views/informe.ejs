<!DOCTYPE html>
<html>

<head>
    <title>Dos Columnas con Pie de Página Pegajoso</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            display: flex;
            flex: 1;
        }

        .columna {
            flex: 1;
            padding: 20px;
            border: 1px solid #ccc;
        }

        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 2px;
        }

        html,
        body {
            height: 100%;
        }

        .cTop {
            column-count: 3;
            column-gap: 20px;
            max-width: 800px; /* Ajusta el ancho máximo según tus necesidades */
            margin: 0 auto; /* Centra el contenedor */
        }

        .coltop {
            break-inside: avoid; /* Evita que se divida dentro de la columna */
            margin-bottom: 20px; /* Espaciado entre las columnas */
        }
        .enlace-descarga {
            color: rgb(69, 69, 77);
            /* Otros estilos que desees aplicar */
        }
        .enlace-descarga:hover {
            color: rgb(43, 63, 151);
            text-decoration: underline;
        /* Estilos adicionales cuando el cursor está sobre el enlace */
        }
    </style>
</head>

<body>
    <div class="pos-f-t sticky-top">
        <div class="collapse" id="navbarToggleExternalContent">
            <div class="bg-dark p-4" style="color: white;">
                <h7 class="text-white h4"><%- detalle %></h7>
                <div class="cTop">
                    <div class="coltop">
                        <h5><%- top.name %></h5>
                        <% if (tipo == 'escuela') { %>
                            <b><%- top.zona %></b>
                        <% } %>
                    </div>

                    <div class="coltop">
                        Detalles
                        <br />
                        <% if (typeof top.noMunicipios == 'string') { %>
                            Municipios: <b><%- top.noMunicipios %></b><br />    
                        <% } %>
                        Escuelas: <b><%- top.noEscuelas %></b><br />
                        Alumnos: <b><%- top.noAlumnos %></b><br />
                        - Niñas: <b><%- top.generos.girls %></b><br />
                        - Niños: <b><%- top.generos.boys %></b>
                    </div>
                
                    <div class="coltop">
                        <br>Mejor escuela<br />
                        <b><%- top.best_school %></b><br />
                        <br>Peor escuela<br />
                        <b><%- top.worst_school %></b><br />
                    </div>

                    <div class="coltop">
                        <br>Top sección <br />
                        Mejor: <b><%- top.topSeccion.mejor %></b><br />
                        Peor: <b><%- top.topSeccion.peor %></b>
                    </div>

                    <div class="coltop">
                        <br>Promedio de calificaciónes<br />
                        Reading/Writing: <b><%- top.qualification_reading %></b><br />
                        Speaking: <b><%- top.qualification_speaking %></b><br>
                        listening: <b><%- top.qualification_listening %></b>
                    </div>
                </div>

                <% if (topMunicipio != 0 ) { %> 
                    <h7 class="text-white h4">Detalles del municipio</h7>
                    <div class="cTop">
                        <div class="coltop">
                            <h5><%- topMunicipio.name %></h5>
                        </div>

                        <div class="coltop">
                            Detalles
                            <br />
                            Escuelas: <b><%- topMunicipio.noEscuelas %></b><br />
                            Alumnos: <b><%- topMunicipio.noAlumnos %></b><br />
                            - Niñas: <b><%- topMunicipio.generos.girls %></b><br />
                            - Niños: <b><%- topMunicipio.generos.boys %></b>
                        </div>

                        <div class="coltop">
                            <br>Mejor escuela<br />
                            <b><%- topMunicipio.best_school %></b><br />
                            <br>Peor escuela<br />
                            <b><%- topMunicipio.worst_school %></b><br />
                        </div>
                    
                        <div class="coltop">
                            <br> Secciones <br />
                            Mejor: <b><%- topMunicipio.topSeccion.mejor %></b><br />
                            Peor: <b><%- topMunicipio.topSeccion.peor %></b>
                        </div>

                        <div class="coltop">
                            <br>Promedio de calificaciónes<br />
                            Reading/Writing: <b><%- topMunicipio.qualification_reading %></b><br />
                            Speaking: <b><%- topMunicipio.qualification_speaking %></b><br>
                            listening: <b><%- topMunicipio.qualification_listening %></b>
                        </div>
                    </div>
                <% } %>


                <% if (topEscuela != 0 ) { %> 
                    <h7 class="text-white h4">Detalles de la escuela</h7>
                    <div class="cTop">
                        <div class="coltop">
                            <h5><%- titulo %></h5>
                        </div>

                        <div class="coltop">
                            Detalles
                            <br />
                            Alumnos: <b><%- topEscuela.students_number %></b><br />
                            - Niñas: <b><%- topEscuela.girl %></b><br />
                            - Niños: <b><%- topEscuela.boy %></b>
                        </div>
                    
                        <div class="coltop">
                            <br> Secciones <br />
                            Mejor: <b><%- topEscuela.best_section %></b><br />
                            Peor: <b><%- topEscuela.worst_section %></b>

                            <br /><br> Grupo <br />
                            Mejor: <b><%- topEscuela.best_group %></b><br />
                        </div>

                        <div class="coltop">
                            <br>Promedio de calificaciónes<br />
                            Reading/Writing: <b><%- topEscuela.qualification_reading %></b><br />
                            Speaking: <b><%- topEscuela.qualification_speaking %></b><br>
                            listening: <b><%- topEscuela.qualification_listening %></b>
                        </div>
                    </div>
                <% } %>

            </div>
        </div>
        <nav class="navbar navbar-dark bg-dark">
            <span class="navbar-text">
                <% if (tipo == 'municipio') { %>
                    Municipio: <%- titulo %>
                <% } %>

                <% if (tipo == 'escuela') { %>
                    Escuela: <%- titulo %>
                <% } %>

                <% if (tipo == 'zona') { %>
                    <%- titulo %>
                <% } %>
            </span>
            <a href="/vsts/vaneSoftecSolutions" class="btn btn-secondary" type="button"
               aria-haspopup="true" data-display="static">
                <img src="/icon/left.svg" alt="Icono">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </nav>
    </div>

    <div class="container">
        <div class="columna">
            <!-- Contenido de la primera columna -->
            <h2>Tablas</h2>
            <p>Las tablas presentan los datos que sirvieron como base para la creación de las gráficas. 
                Estas tablas actúan como la fuente primaria de información cuantitativa, proporcionando detalles específicos sobre cada variable medida. Cada celda en las tablas representa un punto de datos específico. 
                Mientras que las gráficas ofrecen una visualización más intuitiva, las tablas respaldan y detallan los valores cuantitativos que respaldan las representaciones visuales.</p>
            <div class="contenido" style="text-align: -webkit-center;">
                <% tablas.forEach(function(tlb, indexTlb){ %>
                    <section>
                        <h6 style="text-align: left;">Tabla <%= indexTlb + 1%> : <a class="enlace-descarga" onclick="descargarCSV('<%= linkTablas[indexTlb] %>', <%= indexTlb %>)">Ver CSV</a>
                        </h6> 
                        <div style="overflow-x: auto; max-width: 400px;"> <!-- Establece un ancho máximo para la tabla y permite el desplazamiento horizontal -->
                            <table border="1" style="width: 100%;"> <!-- Hace que la tabla ocupe el 100% del ancho del contenedor -->
                              <thead>
                                <tr>
                                  <% cabezeras[indexTlb].forEach(function(cbz) { %>
                                    <th style="width: auto;"> <!-- Puedes ajustar el ancho de las columnas según sea necesario -->
                                      <%= cbz %>
                                    </th>
                                  <% }); %>
                                </tr>
                              </thead>
                              <tbody>
                                <% tlb.forEach(function(dato) { %>
                                  <tr>
                                    <% cabezeras[indexTlb].forEach(function(cbz) { %>
                                      <td>
                                        <%= dato[cbz] || '0' %>
                                      </td>
                                    <% }); %>
                                  </tr>
                                <% }); %>
                              </tbody>
                            </table>
                          </div>
                    </section>
                    <br>
                    <% }); %>
            </div>
        </div>

        <div class="columna">
            <!-- Contenido de la segunda columna -->
            <h2>Imagenes</h2>
            <p> Las imágenes de las gráficas capturan visualmente los resultados obtenidos a través del formulario de recopilación de datos. 
                Estas representaciones gráficas no solo ofrecen una presentación de los resultados, sino que también proporcionan una visión detallada del análisis cuantitativo empleado en el estudio.</p>
            <div class="contenido" style="text-align: -webkit-center;">
                <% imagenes.forEach(function(img, index){ %>
                    <section>
                        <table border="0">
                            <thead>
                                <tr>
                                    <th style="text-align: left;">Imagen <%= index + 1%> : <a class="enlace-descarga" href="<%- img %>" target="_blank">Abrir Imagen</a>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><img src="<%- img %>" width="500"></td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    <br>
                    <% }); %>
            </div>
        </div>
    </div>

    <footer>
        <!-- Pie de página -->
        <p>Vanessa Melenciano Llamas, Isaul Ibarra Belmonte, Ezra federico Parra Gonzalez © 2023 VSTS</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script>
        function descargarCSV(url, index) {
            alert("Para descargar el archivo, En la nueva ventana, click derecho en los datos y luego: 'Guardar como'")
            // URL del archivo CSV
            var urlArchivoCSV = url;
        
            // Crear un enlace temporal
            var enlaceTemporal = document.createElement('a');
            enlaceTemporal.href = urlArchivoCSV;
            enlaceTemporal.target="_blank";
        
            // Simular clic en el enlace para iniciar la descarga
            document.body.appendChild(enlaceTemporal);
            enlaceTemporal.click();
            document.body.removeChild(enlaceTemporal);
        }
        </script>
</body>

</html>